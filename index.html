<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fire Alarm Systems Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #0056b3;
            margin-bottom: 30px;
        }
        .question-block {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .question-block:last-child {
            border-bottom: none;
        }
        .question {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
            line-height: 1.5;
        }
        .options label {
            display: block;
            margin-bottom: 10px;
            cursor: pointer;
            padding: 8px 0;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .options label:hover {
            background-color: #e9e9e9;
        }
        .options input[type="radio"] {
            margin-right: 10px;
        }
        .feedback {
            margin-top: 10px;
            font-weight: bold;
            display: none; /* Hidden by default */
        }
        .correct {
            color: green;
        }
        .incorrect {
            color: red;
        }
        .results {
            text-align: center;
            margin-top: 30px;
            font-size: 1.3em;
            font-weight: bold;
        }
        button {
            display: block;
            width: 150px;
            padding: 10px 20px;
            margin: 20px auto;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Fire Alarm Systems Quiz</h1>
        <div id="quiz-container">
            </div>
        <button id="submit-quiz">Submit Quiz</button>
        <div id="results" class="results"></div>
        <button id="restart-quiz" style="display: none;">Restart Quiz</button>
    </div>

    <script>
        const quizQuestions = [
            {
                'question': "What is the main difference between Class A and Class B fire alarm wiring?",
                'options': ["Class A uses wireless communication; Class B does not",
                            "Class A wiring forms a loop; Class B wiring is a radial or spur",
                            "Class B has better fault tolerance than Class A",
                            "Class A wiring is only used for smoke detectors"],
                'answer': "Class A wiring forms a loop; Class B wiring is a radial or spur"
            },
            {
                'question': "In Class A wiring, what happens when a wire is broken in the loop?",
                'options': ["The entire circuit fails",
                            "Signals still reach all devices from the other direction",
                            "Only the initiating devices stop working",
                            "A fire is automatically detected"],
                'answer': "Signals still reach all devices from the other direction"
            },
            {
                'question': "Which of the following is true about Class B wiring?",
                'options': ["It continues operation if one conductor is broken",
                            "It is looped back to the fire alarm control panel",
                            "Devices beyond a break lose communication",
                            "It requires more cable than Class A"],
                'answer': "Devices beyond a break lose communication"
            },
            {
                'question': "Which wiring method is generally considered more fault-tolerant?",
                'options': ["Class A", "Class B", "Class C", "None of the above"],
                'answer': "Class A"
            },
            {
                'question': "What is typically required in Class A wiring that is not required in Class B?",
                'options': ["End-of-line resistor",
                            "Return path to the fire alarm control panel",
                            "Junction box",
                            "AC power source"],
                'answer': "Return path to the fire alarm control panel"
            },
            {
                'question': "In a Class B circuit, where is the End-of-Line (EOL) resistor placed?",
                'options': ["At the fire alarm control panel",
                            "In the middle of the circuit",
                            "At the last device on the circuit",
                            "At each detector"],
                'answer': "At the last device on the circuit"
            },
            {
                'question': "What is the primary advantage of using Class B wiring?",
                'options': ["Better redundancy",
                            "Simple and cost-effective installation",
                            "Higher data transmission speed",
                            "It does not require supervision"],
                'answer': "Simple and cost-effective installation"
            },
            {
                'question': "In NFPA 72, how is Class A defined regarding fault detection?",
                'options': ["No fault detection is required",
                            "Faults must be ignored",
                            "It must allow continued operation beyond a single open",
                            "It must shut down upon detecting a short"],
                'answer': "It must allow continued operation beyond a single open"
            },
            {
                'question': "Which wiring method allows signal to re-route in the event of a single break?",
                'options': ["Class B", "Class D", "Class A", "Class X"],
                'answer': "Class A"
            },
            {
                'question': "Why might an installer choose Class B wiring over Class A?",
                'options': ["It supports multiple loops",
                            "It is more reliable",
                            "It requires less cable and is cheaper to install",
                            "It allows communication after a fault"],
                'answer': "It requires less cable and is cheaper to install"
            },
            {
                'question': "What is the function of the diodes shown in the alarm signaling devices section of the diagram?",
                'options': ["To suppress voltage spikes",
                            "To limit the current to safe levels",
                            "To allow current flow only during alarm condition",
                            "To signal the control panel directly"],
                'answer': "To allow current flow only during alarm condition"
            },
            {
                'question': "In the Class A alarm condition, how does current reach all alarm signaling devices even if a conductor is broken?",
                'options': ["Through a backup battery",
                            "Through wireless communication",
                            "Through the return loop path",
                            "Through the end-of-line resistor"],
                'answer': "Through the return loop path"
            },
            {
                'question': "What will the control panel detect if a wire is cut (open circuit) in the IDC field wiring?",
                'options': ["Alarm condition",
                            "Normal condition",
                            "Short circuit",
                            "Trouble condition"],
                'answer': "Trouble condition"
            },
            {
                'question': "Which voltage reading suggests that there is no continuity to the end-of-line resistor?",
                'options': ["Vz = Vs", "Vz = 0", "Vz = Vs/2", "Vz = -Vs"],
                'answer': "Vz = 0"
            },
            {
                'question': "Why does the voltage sense circuitry show Vs/2 at the zone test point during normal operation?",
                'options': ["Because the alarm contacts are closed",
                            "Due to the voltage drop across a diode",
                            "Because current flows through the EOL resistor",
                            "Because the battery is half-charged"],
                'answer': "Because current flows through the EOL resistor"
            },
            {
                'question': "What condition is indicated when Vz = 0 volts?",
                'options': ["Alarm", "Trouble (open circuit or break)", "Supervisory", "Normal"],
                'answer': "Trouble (open circuit or break)"
            },
            {
                'question': "What is the primary purpose of polling in an addressable fire alarm system?",
                'options': ["to send power to all devices simultaneously",
                            "to actively query each addressable device one at a time to check its status",
                            "to broadcast alarm signals to all devices at once",
                            "to reset the system automatically"],
                'answer': "to actively query each addressable device one at a time to check its status"
            },
            {
                'question': "How does an addressable fire alarm system identify individual devices?",
                'options': ["By their physical location",
                            "By their unique addresses assigned to each device",
                            "By the color of their wiring",
                            "By their manufacturer’s serial number"],
                'answer': "By their unique addresses assigned to each device"
            },
            {
                'question': "What happens if a device fails to respond to a polling request from the FACP?",
                'options': ["The system ignores the device and continues polling others",
                            "The FACP generates a trouble signal",
                            "The device is automatically reset",
                            "The entire system shuts down"],
                'answer': "The FACP generates a trouble signal"
            },
            {
                'question': "In the polling method, how does the FACP determine if a device is in an alarm state?",
                'options': ["By detecting a voltage drop across the loop",
                            "By receiving a specific response from the device indicating \"Alarm\"",
                            "By measuring the temperature of the device",
                            "By listening for an audible alarm from the device"],
                'answer': "By receiving a specific response from the device indicating \"Alarm\""
            },
            {
                'question': "Which of the following is NOT a typical addressable device in a fire alarm system?",
                'options': ["Smoke detector", "Manual pull station", "Heat detector", "Circuit breaker"],
                'answer': "Circuit breaker"
            },
            {
                'question': "What is the sequence of actions in the polling method?",
                'options': ["FACP sends a status request → Device responds → FACP moves to the next address",
                            "FACP broadcasts a reset command → All devices respond at once",
                            "FACP waits for devices to report alarms randomly",
                            "FACP sends power pulses to devices in no particular order"],
                'answer': "FACP sends a status request → Device responds → FACP moves to the next address"
            },
            {
                'question': "What type of fault would most likely cause a device to fail to respond to polling?",
                'options': ["Open circuit or ground fault",
                            "Overvoltage in the system",
                            "Incorrect device color coding",
                            "High ambient temperature"],
                'answer': "Open circuit or ground fault"
            },
            {
                'question': "How does the FACP differentiate between a normal status and an alarm status in polling?",
                'options': ["By the time delay in the response",
                            "By the specific message sent back by the device",
                            "By the brightness of an LED on the device",
                            "By the frequency of the response signal"],
                'answer': "By the specific message sent back by the device"
            },
            {
                'question': "Which communication method involves the FACP sequentially checking each device’s status?",
                'options': ["Broadcast signaling", "Polling", "Multicast transmission", "Random access"],
                'answer': "Polling"
            },
            {
                'question': "What is displayed on the FACP when a device reports an alarm during polling?",
                'options': ["\"System Normal\"", "\"Device Missing\"", "\"Device 02 Alarm\"", "\"Power Failure\""],
                'answer': "\"Device 02 Alarm\""
            },
            {
                'question': "What is the key characteristic of the update method in addressable fire alarm systems?",
                'options': ["The FACP sequentially queries each device",
                            "Devices must wait for a poll to report status changes",
                            "Devices can spontaneously send information to the FACP",
                            "Only smoke detectors can communicate with the FACP"],
                'answer': "Devices can spontaneously send information to the FACP"
            },
            {
                'question': "How does a smoke detector communicate in the update method when it detects smoke?",
                'options': ["It waits for the next polling cycle",
                            "It sends a signal immediately to the panel",
                            "It activates a local alarm first",
                            "It requires manual reset before reporting"],
                'answer': "It sends a signal immediately to the panel"
            },
            {
                'question': "What is the main advantage of the update method over polling?",
                'options': ["Reduced power consumption",
                            "Faster reporting of alarm conditions",
                            "Simpler wiring requirements",
                            "Lower system cost"],
                'answer': "Faster reporting of alarm conditions"
            },
            {
                'question': "In the update method, how does the FACP typically receive device status information?",
                'options': ["Through scheduled polling intervals",
                            "Via spontaneous updates from devices",
                            "Only during system tests",
                            "Through manual activation"],
                'answer': "Via spontaneous updates from devices"
            },
            {
                'question': "Who or what does the acronym AHJ refer to in fire alarm and building codes?",
                'options': ["Architect of Housing and Jobs",
                            "Authority Having Jurisdiction",
                            "Automated Hazard Judgment",
                            "Assistant Housing Judge"],
                'answer': "Authority Having Jurisdiction"
            },
            {
                'question': "What is a \"Contained Use Area\"?",
                'options': ["An open space designed for public gatherings",
                            "A space where occupants are kept under supervision and cannot leave on their own",
                            "An area used to contain fire extinguishers",
                            "A sealed room for gas containment"],
                'answer': "A space where occupants are kept under supervision and cannot leave on their own"
            },
            {
                'question': "A “Dwelling Unit” is best described as:",
                'options': ["A room within a hospital",
                            "A single room used for meetings",
                            "A self-contained unit with living, cooking, sleeping, and sanitary facilities",
                            "A temporary storage unit"],
                'answer': "A self-contained unit with living, cooking, sleeping, and sanitary facilities"
            },
            {
                'question': "What is the primary function of a Fire Detector?",
                'options': ["To suppress a fire",
                            "To detect one or more products of combustion and trigger an alarm",
                            "To locate the fire’s origin",
                            "To activate sprinklers directly"],
                'answer': "To detect one or more products of combustion and trigger an alarm"
            },
            {
                'question': "“Floor Area” refers to:",
                'options': ["The total area including the basement",
                            "The total square footage of a fire zone",
                            "The space between exit doors",
                            "The area of all stories of a building excluding exterior walls and shafts"],
                'answer': "The area of all stories of a building excluding exterior walls and shafts"
            },
            {
                'question': "What is a “Dumbwaiter”?",
                'options': ["A small elevator used for transporting food, laundry, or supplies",
                            "A hidden fire suppression device",
                            "A building code for windowless rooms",
                            "A maintenance panel in the fire alarm system"],
                'answer': "A small elevator used for transporting food, laundry, or supplies"
            },
            {
                'question': "“Major Occupancy” in a building refers to:",
                'options': ["The first group of people to enter a building",
                            "The largest room in a fire zone",
                            "The main purpose for which a building or part of a building is used",
                            "The occupancy with the highest ceiling"],
                'answer': "The main purpose for which a building or part of a building is used"
            },
            {
                'question': "What is a “Suite” according to building codes?",
                'options': ["A luxury area in hotels only",
                            "A room that includes a kitchen",
                            "A group of rooms operated as a single unit with controlled access",
                            "An individual office inside a shopping mall"],
                'answer': "A group of rooms operated as a single unit with controlled access"
            },
            {
                'question': "“Means of Egress” refers to:",
                'options': ["Windows used for ventilation",
                            "The mechanical ventilation system",
                            "A continuous path of travel to a public way for exiting a building",
                            "Fire hose cabinet location"],
                'answer': "A continuous path of travel to a public way for exiting a building"
            },
            {
                'question': "What is meant by “Primary Power” in a fire alarm system?",
                'options': ["Emergency power from a diesel generator",
                            "Battery power used during outages",
                            "The main electrical power supply (usually from the utility grid)",
                            "Solar panels feeding the alarm system"],
                'answer': "The main electrical power supply (usually from the utility grid)"
            },
            {
                'question': "“Standby (Backup) Power” is defined as:",
                'options': ["Power for running ventilation fans",
                            "Power provided to the HVAC only",
                            "A power source that takes over if the primary power fails",
                            "Power used to boost the speaker volume"],
                'answer': "A power source that takes over if the primary power fails"
            },
            {
                'question': "Which of the following would most likely fall under a \"Contained Use Area\"?",
                'options': ["An underground parking garage",
                            "A daycare facility",
                            "A detention center or psychiatric unit",
                            "A hotel lobby"],
                'answer': "A detention center or psychiatric unit"
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const submitButton = document.getElementById('submit-quiz');
        const restartButton = document.getElementById('restart-quiz');
        const resultsDiv = document.getElementById('results');

        let currentQuestions = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function buildQuiz() {
            quizContainer.innerHTML = ''; // Clear previous questions
            resultsDiv.innerHTML = ''; // Clear previous results
            submitButton.style.display = 'block';
            restartButton.style.display = 'none';

            // Create a deep copy of the quizQuestions array to avoid modifying the original
            currentQuestions = JSON.parse(JSON.stringify(quizQuestions));
            shuffleArray(currentQuestions); // Scramble questions

            currentQuestions.forEach((qData, index) => {
                const questionBlock = document.createElement('div');
                questionBlock.classList.add('question-block');

                const questionElement = document.createElement('div');
                questionElement.classList.add('question');
                questionElement.textContent = qData.question;
                questionBlock.appendChild(questionElement);

                const optionsDiv = document.createElement('div');
                optionsDiv.classList.add('options');
                shuffleArray(qData.options); // Scramble options for the current question

                qData.options.forEach(option => {
                    const label = document.createElement('label');
                    const radioInput = document.createElement('input');
                    radioInput.type = 'radio';
                    radioInput.name = `question${index}`;
                    radioInput.value = option;
                    label.appendChild(radioInput);
                    label.appendChild(document.createTextNode(option));
                    optionsDiv.appendChild(label);
                });
                questionBlock.appendChild(optionsDiv);

                const feedbackDiv = document.createElement('div');
                feedbackDiv.classList.add('feedback');
                questionBlock.appendChild(feedbackDiv);

                quizContainer.appendChild(questionBlock);
            });
        }

        function showResults() {
            let score = 0;
            currentQuestions.forEach((qData, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const feedbackDiv = quizContainer.children[index].querySelector('.feedback');
                feedbackDiv.style.display = 'block'; // Make feedback visible

                if (selectedOption) {
                    if (selectedOption.value.toLowerCase() === qData.answer.toLowerCase()) {
                        score++;
                        feedbackDiv.textContent = "Correct!";
                        feedbackDiv.classList.add('correct');
                        feedbackDiv.classList.remove('incorrect');
                    } else {
                        feedbackDiv.textContent = `Incorrect. The correct answer was: ${qData.answer}`;
                        feedbackDiv.classList.add('incorrect');
                        feedbackDiv.classList.remove('correct');
                    }
                } else {
                    feedbackDiv.textContent = `You didn't answer. The correct answer was: ${qData.answer}`;
                    feedbackDiv.classList.add('incorrect');
                    feedbackDiv.classList.remove('correct');
                }

                // Disable all radio buttons after submission
                const radios = quizContainer.children[index].querySelectorAll('input[type="radio"]');
                radios.forEach(radio => radio.disabled = true);
            });

            resultsDiv.textContent = `You got ${score} out of ${currentQuestions.length} questions correct.`;
            submitButton.style.display = 'none';
            restartButton.style.display = 'block';
        }

        // Event Listeners
        submitButton.addEventListener('click', showResults);
        restartButton.addEventListener('click', buildQuiz);

        // Initial quiz build when the page loads
        document.addEventListener('DOMContentLoaded', buildQuiz);
    </script>
</body>
</html>